<!DOCTYPE html>
<html>
  <%- include('partials/head', {title: title}) %>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-2">
          <%- include('partials/sidebar') %>
        </div>
        <div class="col-sm-10">
            <h1><%=title%> : <%=author.name%></h1>
            <p><%=author.dob === 'Invalid DateTime' ? 'TBD' : author.dob%> - <%=author.dod === 'Invalid DateTime' ? 'TBD' : author.dod%></p>
            <%if(author_books.length){%>
                <p>
                    <strong>Delete the following books before attempting to delete this author:</strong>
                </p>
                <div style="margin-left: 20px; margin-top: 20px">
                    <h4>Books</h4>
                    <dl>
                        <%for(let book of author_books){%>
                            <dt>
                                <a href="<%=book.url%>"><%=book.title%></a>
                                <dd>
                                    <%=book.summary%>
                                </dd>
                            </dt>
                        <%}%>
                    </dl>
                </div>
            <%}
            else{%>
                <p>Do you really want to delete this author?</p>
                <form method="POST" action="">
                    <div class='form-group'>
                        <input type="hidden" id="authorid" class="form-control" name="authorid" required="true" value="<%=author._id%>">
                    </div>
                    <button class="btn btn-primary" type="submit">Delete</button>
                </form>   
            <%}%>
            
        </div>
      </div>
    </div>
  </body>
</html>